!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).immediate=n()}(this,(function(){"use strict";var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var n={__proto__:null,test:function(){return void 0!==e.process&&!process.browser},install:function(e){return function(){process.nextTick(e)}}};var t,r,o,u={__proto__:null,test:function(){return"function"==typeof e.queueMicrotask},install:function(n){return function(){e.queueMicrotask(n)}}},i=e.MutationObserver||e.WebKitMutationObserver;var a,l=-1,s=[],c=!1;function f(){r&&o&&(r=!1,o.length?s=o.concat(s):l=-1,s.length&&d())}function d(){if(!r){c=!1,r=!0;for(var e=s.length,n=setTimeout(f);e;){for(o=s,s=[];o&&++l<e;)o[l].run();l=-1,e=s.length}o=null,l=-1,r=!1,clearTimeout(n)}}for(var p=-1,h=(t=[n,u,{__proto__:null,test:function(){return i},install:function(n){var t=0,r=new i(n),o=e.document.createTextNode("");return r.observe(o,{characterData:!0}),function(){o.data=t=++t%2}}},{__proto__:null,test:function(){return!e.setImmediate&&void 0!==e.MessageChannel},install:function(n){var t=new e.MessageChannel;return t.port1.onmessage=n,function(){t.port2.postMessage(0)}}},{__proto__:null,test:function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},install:function(n){return function(){var t=e.document.createElement("script");return t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t),n}}},{__proto__:null,test:function(){return!0},install:function(e){return function(){setTimeout(e,0)}}}]).length;++p<h;)if(t[p]&&t[p].test&&t[p].test()){a=t[p].install(d);break}function _(e,n){this.fun=e,this.array=n}return _.prototype.run=function(){var e=this.fun,n=this.array;switch(n.length){case 0:return e();case 1:return e(n[0]);case 2:return e(n[0],n[1]);case 3:return e(n[0],n[1],n[2]);default:return e.apply(null,n)}},function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];s.push(new _(e,n)),c||r||(c=!0,a())}}));
